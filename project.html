<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width" , initial-scale="1.0">
  <title>Gastro</title>
  <!-- Bootstrap -->
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
  <!-- Fonts -->
  <!--Firebase-->
</head>

<style>
  .col-center {
    float: none;
    margin-right: auto;
    margin-left: auto;
  }

  #map {
    height: 400px;
    width: 400px;
  }

  footer {
    margin: 2em 0 2em;
  }
</style>

<body>

  <!-- MAIN JUMBOTRON -->
  <!-- ------------------------------------------------------------------------- -->
  <div class="jumbotron jumbotron-fluid text-center">
    <h1 class="display-3">Gastro</h1>
  </div>

  <!-- INTRODUCTION SCREEN -->
  <!-- ------------------------------------------------------------------------- -->
  <div id="introduction-screen" class="container text-center">
    <div class="row">
      <div class="col-lg-4 col-center">
        <h3>Welcome to Gastro!</h3>
        <p>
          Gastro aims to help groups of people decide <br> what to type of cuisine to eat in a city <br>
        </p>

        <h5>How it works:</h5>
        <p>
          The group specifies some parameters<br> Each individual specifies what they prefer<br> Gastro works its magic...<br> and suggest some restaurants for the group!
        </p>
        <button id="start-button" class="btn btn-lg btn-primary">Begin!</button>
      </div>
    </div>
  </div>

  <!-- FIRST PAGE - GROUP SUBMISSION -->
  <!-- ------------------------------------------------------------------------- -->
  <div id="page-one-div" class="container text-center">
    <div class="row">
      <div class="col-lg-4 col-center">
        <form class="group-submission">

          <div class="form-group">
            <label>City</label>
            <input id="city-input" type="text" class="Autocomplete form-control" placeholder="Enter a city!">
          </div>

          <div class="form-group">
            <label>Group Size</label><br>
            <input id="group-size-input" type="number" min="1" max="20">
          </div>

          <div class="form-group">
            <label>Price</label><br>
            <span>
              <input id="min-price-input" type="number" min="0" max="4" value="0"> to <input id="max-price-input" type="number" min="0" max="4" value="4">
            </span>
            <p class="help-block">0 is cheap. 4 is pricy!</p>
          </div>

          <div class="form-group">
            <label>Radius</label>
            <input id="radius-input" type="range" class="form-control" min="5" max="30" step="5" value="15" onchange="radiusOutput.value=value">
            <output id="radiusOutput" value="15">15</output>
            <p class="help-block">How many miles?</p>
          </div>

        </form>
        <button id="page-one-submit" class="btn btn-lg btn-primary">Submit</button>
      </div>
    </div>
  </div>

  <!-- SECOND PAGE - INDIVIDUAL SUBMISSIONS -->
  <!-- ------------------------------------------------------------------------- -->

  <div id="page-two-div" class="container">
    <div class="row">
      <div class="col-lg-8 col-center">
        <div id="page-two-deck" class="card-deck"></div>
        <button id="page-two-submit" class="btn btn-lg btn-primary">Submit All</button>
      </div>
    </div>
  </div>

  <!-- THIRD PAGE - RESULTS -->
  <!-- ------------------------------------------------------------------------- -->

  <div id="page-three-div" class="container">
    <div class="row">
      <div class="col-lg-8 col-center">
        <div id="page-three-deck" class="card-deck"></div>
        <div id="map" class="col-center"></div>
      </div>
    </div>
  </div>


  <footer></footer>
</body>

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
<!-- Bootstrap JS -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
<!-- Js -->
<script type="text/javascript">
  // EVENT HANDLERS

  // intro screen start button event handler -DONE
  $(document).on('click', '#start-button', function(e) {
    e.preventDefault();
    $("#introduction-screen").fadeOut("slow", function() {
      $("#page-one-div").fadeIn()
    });
  });

  // page ONE submit button event handler
  $(document).on('click', '#page-one-submit', function(e) {
    e.preventDefault();
    $("#page-one-div").fadeOut("slow", function() {
      parseGroupSubmission();
      for (var i = 0; i < numOfUsers; i++) {
        $('#page-two-deck').append(submissionCard());
      }
      $("#page-two-div").fadeIn()
    });
  });

  // page TWO submit button event handler
  $(document).on('click', '#page-two-submit', function(e) {
    e.preventDefault();
    $("#page-two-div").fadeOut('slow', function() {
      createUsersArray(numOfUsers);
      $("#page-three-div").fadeIn();
    });
  });


  // document ready function
  $(document).ready(function() {
    let groupCity;
    let numOfUsers;
    let groupRadius;
    let groupMinPrice;
    let groupMaxPrice;

    $("#page-one-div").hide();
    $("#page-two-div").hide();
    $("#page-three-div").hide();

  });

  // FUNCTIONS
  function parseGroupSubmission() {
    groupCity = document.getElementById('city-input').value;
    numOfUsers = document.getElementById('group-size-input').value;
    groupMinPrice = document.getElementById('min-price-input').value;
    groupMaxPrice = document.getElementById('max-price-input').value;
    groupRadius = document.getElementById('radius-input').value;
    return;
  }

  function submissionCard() {
    var userCard =
    `
    <div class="card custom-card-style">
      <div class="card-block">
        <form class="user-submission">
          <div class="form-group">
            <label class="card-title">Name</label><br>
            <input name="user-name" type="text" placeholder="What should we call you?">
          </div>
          <div class="form-group">
            <label class="card-title">Cuisine</label><br>
            <select name="cuisine-option">
              <option value="mexican">Mexican</option>
              <option value="italian">Italian</option>
              <option value="arabic">Arabic</option>
              <option value="chinese">Chinese</option>
              <option value="deli">Deli</option>
              <option value="indian">Indian</option>
              <option value="french">French</option>
              <option value="american">American</option>
              <option value="german">German</option>
              <option value="thai">Thai</option>
            </select>
          </div>
        </form>
      </div>
    </div>
    `;
    return userCard;
  }

  function createUsersArray(totalUsers) {
    var usersArr = []
    var users = document.getElementsByName('user-name');
    var cuisines = document.getElementsByName('cuisine-option');
    for (var i = 0; i < totalUsers; i++) {
      var name = users[i].value;
      var cuisine = cuisines[i].value;
      var obj = {};
      obj.cuisine = cuisine;
      obj.name = name;
      usersArr.push(obj);
    }
    return usersArr;
  }

  function convertMilesToMeters(miles) {
    let meters = Math.round(miles * (50000 / 31.0686));
    return meters
  }
</script>

</html>
